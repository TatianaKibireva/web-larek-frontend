# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/components/common/ — папка с общим кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Описание проекта

Проект "Web-larek" - это интернет-магазин с товарами для веб-разработчиков. Пользователь может посмотреть каталог товаров на главной странице, добавить товары в корзину и сделать заказ.  Проект реализован на TypeScript и представляет собой SPA (Single Page Application) с использованием API для получения данных о товарах.

Особенности реализации:
 1. Модальные окна закрываются:
    - по клику вне модального окна;
    - по клику на иконку «Закрыть» (крестик).
 2. Кнопка перехода к следующему шагу становится доступна только после выполнения действий на текущей странице (выбора товара, способа оплаты, заполнения данных о покупателе).

Интерфейс можно условно разделить на 3 процесса:
1. Просмотр каталога товаров;
2. Просмотр детальной информации о товаре и добавлние его в корзину;
3. Оформление товара.

## Архитектура проекта (MVP)

Основой системы является класс CardModel (расположенный в src/components/CardModel.ts), который инкапсулирует все данные приложения и бизнес-логику работы с ними. Модель содержит данные приложения и методы по работе с ними.

Для уведомления об изменениях используется система событий, реализованная через брокер событий EventEmitter (src/components/base/events.ts). 
Презентеры - служат для обработки пользовательских действий, они подписываются на события от элементов отображения, вызывают соответствующие методы модели и координируют обновление элементов отображения через EventEmitter.

## Слой Model

CardModel.ts —  центральное хранилище данных и бизнес-логики.
1. Модель инкапсулирует все ключевые данные:
  - private cards: ICard[] (каталог товаров)
  - private basket: IBasketItem[] (товары в корзине)
  - private order: IOrder | null (данные заказа:оплата, адрес, контакты)

2. Реализует основные операции магазина (бизнес-логика):
- getCards() (получение каталога)
- getCardById() (поиск товара по ID) 
- addToBasket() (добавление с проверкой дубликатов)
- removeFromBasket() (удаление с обновлением количества)
- getBasketItems() (актуальное состояние корзины)
- getTotalPrice() (расчет суммы)
- setOrderPayment(), setOrderContacts() (сохранение данных заказа)
- validateOrder()(проверка полноты данных)

## Слой View

Основные компоненты слоя, реализующие интерфейсы IViewModal и IProductView:
- Modal - базовый класс модальных окон
- CardView - отображение карточек товаров
- BasketModal - представление корзины
- OrderForm/ContactsForm - формы оформления


 ## Слой Presenter

В Presenter передаются экземпляры отображения и модели, которые нужно связать. Он выступает посредником, обрабатывая события и координируя работу системы.
Основные презентеры:
- ModalPresenter - управление модальными окнами
- BasketPresenter - логика корзины
- OrderPresenter - процесс оформления заказа
- ContactsPresenter - работа с контактными данными
- SuccessPresenter - отображение успешного заказа


